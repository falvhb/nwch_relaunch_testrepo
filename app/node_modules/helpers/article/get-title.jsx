import _ from 'lodash';

import getName from 'helpers/user/get-name';

// Map title icons based on teaser labeltype
const titleIcons = {
  video: 'video',
  quiz: 'quiz',
  survey: 'survey',
  map: 'map',
  live: 'bullet',
  leserbeitrag: 'megaphone',
  vereinsmeldung: 'megaphone',
  sportverein: 'megaphone',
  gemeindebeitrag: 'megaphone'
};

// Map author suffixes based on teaser labeltype
const authorSuffixes = [
  'meinung'
];

// Ignored suffixes by teaser variation
const ignoredAuthorSuffixes = [
  'quote',
  'author'
];

export default function(article, variation) {

  let labelType = _.get(article, 'labeltype');
  let user = _.get(article, 'author_detail.user');

  let needsSuffix = user && _.includes(authorSuffixes, labelType) && !_.includes(ignoredAuthorSuffixes, variation);

  let suffix = needsSuffix ? getName(user) : false;

  return {
    text: _.get(article, 'title'),
    icon: _.get(titleIcons, labelType),
    suffix: suffix
  };
}
