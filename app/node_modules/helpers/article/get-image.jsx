import _ from 'lodash';

import getMainAsset from 'helpers/get-main-asset';
import getImageProps from 'helpers/get-image-props';
import getTeaserVariationConfig from 'helpers/teaser/get-variation-config';

export default function(article, variation) {
  let articleAssets = _.get(article, 'assets');
  let mainAsset = getMainAsset(articleAssets);
  let imageProps = getImageProps(mainAsset);
  let config = getTeaserVariationConfig(variation);
  let imageConfig = _.get(config, 'image');

  if (!mainAsset || !imageProps || !imageConfig) {
    return null;
  }

  return _.extend({}, imageProps, imageConfig);
}
