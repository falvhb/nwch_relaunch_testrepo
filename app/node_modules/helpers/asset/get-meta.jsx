import _ from 'lodash';
import stripMarkup from 'helpers/strip-markup';
import getSource from './get-source';

export default function(asset) {
  if (asset) {

    let strippedDescription = stripMarkup(asset.description || asset.asset.description);
    let title = asset.title || asset.asset.title;
    let source = _.has(asset, 'asset.source') ? getSource(asset.asset.source) : '';

    let output = {
      title: title ? title.trim() : '',
      description: strippedDescription ? strippedDescription.trim() :  '',
      source: source ? 'Â© ' + getSource(asset.asset.source) : ''
    };

    // if everything is empty, return false
    if (!output.title && !output.description && !output.source) {
      return false;
    }

    return output;
  }
}
