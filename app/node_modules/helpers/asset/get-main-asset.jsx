import _ from 'lodash';
import getImageProps from './get-image-props';

let allowedMainAssets = [
  'asset_image',
  'asset_video',
  'asset_image_gallery'
];

export default function(assets) {
  if (assets) {

    let mainAsset = _.find(assets, function(_asset) {
      let thisAsset = _.get(_asset, 'asset');
      let allowedAssetType = _.includes(allowedMainAssets, thisAsset.content_type);
      let assetSrc = _.get(getImageProps(_asset), 'src');
      return allowedAssetType && assetSrc;
    });

    if (mainAsset) {
      return mainAsset;
    }

    return null;

  }
}
