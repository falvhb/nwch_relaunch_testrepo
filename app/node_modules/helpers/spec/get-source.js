/* eslint-disable no-unused-expressions */

import _ from 'lodash';

import getSource from 'helpers/get-source';
import fixture from './data/sample-source';

import { expect } from 'chai';

describe('Helpers', function() {

  describe('getSource', function() {

    it('returns correctly', function() {
      let result = getSource(fixture.source);
      expect(result).to.equal('Andreas Kaufmann');
    });

    it('returns capitalized', function() {
      let data = _.assign({}, fixture.source);
      data.title = 'andreas KAUFMANN';
      let result = getSource(data);
      expect(result).to.equal('Andreas Kaufmann');
    });

    it('returns fallback', function() {
      let data = _.assign({}, fixture.source);
      data.title = null;
      let result = getSource(data);
      expect(result).to.equal('Grenchener Tagblatt');
    });

    it('puts spaces around slashes', function() {
      let data = _.assign({}, fixture.source);
      data.title = 'andreas kaufmann/akaufmann/kaufmann';
      let result = getSource(data);
      expect(result).to.equal('Andreas Kaufmann / Akaufmann / Kaufmann');
    });

    it('returns if empty', function() {
      let data = _.assign({}, fixture.source);
      data.title = null;
      data.source.title = null;
      let result = getSource(data);
      expect(result).to.equal('');
    });

  });

});
