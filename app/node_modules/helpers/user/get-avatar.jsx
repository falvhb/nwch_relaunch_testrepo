import _ from 'lodash';

import { goldbachImageSource } from 'helpers/image';

import getName from './get-name';
import getImageProps from 'helpers/asset/get-image-props';

let squareImage = function(src) {
  return goldbachImageSource({
    width: 80,
    height: 80,
    fill: true,
    src: src
  });
};

export default function(author) {
  if (author) {

    let user = author.user;
    let imageAsset = author.image;

    let imageSrc = imageAsset
      ? getImageProps(imageAsset).src
      : _.get(user, 'image_url');

    if (!imageSrc) {
      return null;
    }

    return {
      alt: getName(user),
      src: squareImage(imageSrc),
      itemProp: 'author'
    };
  }
}
