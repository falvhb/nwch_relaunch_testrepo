var domainVariations = require('config/domain-variations');
var _ = require('lodash');

/**
 * resolve the skin name from a domain string
 *
 * @param  {String}  domain  The domain to check
 *
 * @return  {String}         The skin name or null if not found
 */
function getSkinFromDomain (domain) {
  var result = _.findKey(domainVariations, function (item) {
    var strippedDomain = domain.replace('www.', '');
    var domainValue = _.get(item, 'domain') || '';
    var strippedDomainValue = domainValue.replace('www.', '');
    return domainValue && strippedDomain === strippedDomainValue;
  });

  return result || null;
}

module.exports = getSkinFromDomain;
