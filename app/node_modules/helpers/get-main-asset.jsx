import _ from 'lodash';

let isOfType = function(_asset, contentType) {
  return _asset.asset && _asset.asset.content_type === contentType;
};

export default function(assets) {
  if (assets) {
    // check if there is an image asset
    let imageAsset = _.find(assets, function(_asset) {
      return isOfType(_asset, 'asset_image');
    });

    if (imageAsset) {
      return imageAsset;
    }

    // No image asset, but maybe there is an image_gallery. If so, use the
    // first image from the gallery.
    let galleryAsset = _.find(assets, function(_asset) {
      return isOfType(_asset, 'asset_image_gallery');
    });

    if (galleryAsset) {
      // get the first image
      let asset = galleryAsset.asset &&
                  galleryAsset.asset.images &&
                  galleryAsset.asset.images[0];

      return asset;
    }

    return null;

  }
}
