function hasNative(el) {
  return "classList" in el;
}

function getClasses(el) {
  return el.className.replace(/^\s+|\s+$/g, '').split(/\s+/);
}

function add(el, className) {
  if (hasNative(el)) {
    el.classList.add(className);
  } else {
    let classes = getClasses(el);
    let index = classes.indexOf(className);
    if (index === -1) {
      classes.push(className);
      el.className = classes.join(' ');
    }
  }
}

function remove(el, className) {
  if (hasNative(el)) {
    el.classList.remove(className);
  } else {
    let classes = getClasses(el);
    let index = classes.indexOf(className);
    if (index !== -1) {
      classes.splice(index, 1);
      el.className = classes.join(' ');
    }
  }
}

function toggle(el, className) {
  if (hasNative(el)) {
    el.classList.toggle(className);
  } else {
    let classes = getClasses(el);
    let index = classes.indexOf(className);
    if (index === -1) {
      classes.push(className);
    } else {
      classes.splice(index, 1);
    }
    el.className = classes.join(' ');
  }
}

export default {
  add: add,
  remove: remove,
  toggle: toggle
};
