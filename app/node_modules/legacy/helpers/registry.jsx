
let CLASS_REGISTRY = {}


export function registerContentType(cls, name) {
  CLASS_REGISTRY[name] = cls
}

export function getRelationFor(obj, rel) {
  // get the class that is stored in CLASS_REGISTRY[<content_type>_relation]
  //console.log("getRelationFor: obj[content_type_relation]='", obj['content_type'] + '_relation' + "''");
  let cls = CLASS_REGISTRY[obj['content_type'] + '_relation']
  if (cls) {
    //console.log('getRelationFor: return object of class in CLASS_REGISTRY[' + obj['content_type'] + '_relation' + '] = \n', cls)
    return new cls(rel)
  }
  return null;
}

export function getImplementation(obj) {
  let cls = CLASS_REGISTRY[obj['content_type']]
  //console.log('getImplementation: return class in CLASS_REGISTRY[' + obj['content_type'] + '] = \n', cls)
  if (cls) {
    return new cls(obj)
  }
  return null;
}

export function clearAll() {
  CLASS_REGISTRY = {}
}

export function printAll() {
  console.log("printAll: CLASS_REGISTRY=", CLASS_REGISTRY);
}
