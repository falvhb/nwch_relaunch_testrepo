
import getMainAsset from "helpers/get-main-asset.jsx";

const ASSET_LABELS = {
  asset_video: 'Video',
  asset_audio: 'Audio',
  asset_image_gallery: 'Bilder',
  asset_survey: 'Umfrage',
  asset_quiz: 'Quiz',
  asset_infographic: 'Infografik'
};



export default class View {

  constructor (article) {
    this.article = article;
  }

//    def mainAssetLabel(self):
//        if self.obj.label:
//            return self.obj.label
//        if self.isUgcArticle():
//            return self.ressort.title
//        return ASSET_LABELS.get(self.mainAssetType(), False)


  get mainAssetLabel() {
    const { article } = this;
    if (article.label) {
      return article.label;
    }
    if (this.isUgcArticle) {
      if (article.ressorts && article.ressorts.length > 0) {
        return article.ressorts[0].title;
      }
    }
    return ASSET_LABELS[this.mainAssetType];
  }

//    def spitzmarke(self):
//      # TODO: remove mainKeyword as soon as migration is finished
//      return (INewsArticle(self.context).spitzmarke or
//          self.mainKeyword() or
//          self.city())

  get spitzmarke() {
    return this.article.spitzmarke || "TODO";
  }

//    def title(self):
//        return replaceQuotes(
//                IDCDescriptiveProperties(self.context).title or u''
//                )

  get title() {
    return this.article.title || "TODO";
  }

//    def isUgcArticle(self):
//        return IUGCNewsArticleType.providedBy(self.context)

  get isUgcArticle() {
    return this.article.content_type === "ugcnewsarticle";
  }

//    def mainAssetType(self):
//        asset = self.mainAsset
//        if not asset:
//            return ''
//        elif IGalleryAssetType.providedBy(asset):
//            if IGalleryAsset(asset).assets.count() <= 1:
//                return ''
//        return asset.contentType


  get mainAssetType() {
    let asset = this.mainAsset;
    if (!asset) {
      return "";
    }

    return asset.content_type;
  }

  /*
    @Lazy
    def mainAsset(self):
        return self.teaserAsset(self.obj)
        */

  get mainAsset() {
    return getMainAsset(this.article.assets);
  }

//    @Lazy
//    def providesTeaserCompatibleMainAsset(self):
//        """Check if the main asset is able to provide a teaser image"""
//        mainAsset = self.mainAsset
//        if mainAsset is None:
//            return False
//        isAudioWithImage = (IAudioAssetType.providedBy(mainAsset)
//                            and IMediaAsset(mainAsset).imageAsset is not None
//                           )
//        return (isAudioWithImage
//                or IImageAssetType.providedBy(mainAsset)
//                or IVideoAssetType.providedBy(mainAsset)
//                or ISurveyAssetType.providedBy(mainAsset)
//                or IQuizAssetType.providedBy(mainAsset)
//                or IGalleryAssetType.providedBy(mainAsset)
//                or IHTMLSnippetAssetType.providedBy(mainAsset)
//               )

  get providesTeaserCompatibleMainAsset() {
    let mainAsset = this.mainAsset;

    if (!mainAsset) {
      return false;
    }

    return true;
  }

//    def mainAssetLabelImg(self):
//        if self.ressort is not None:
//            if self.ressort.urlpart.lower() == UGC_RESSORT_NAME:
//                return 'assetLabelIcon labelIconReader'
//            elif self.ressort.urlpart.lower() == UGC_CLUB_RESSORT_NAME:
//                return 'assetLabelIcon labelIconClub'
//        return False

  get mainAssetLabelImg() {
    return false;
  }

//    def anriss(self):
//        return replaceQuotes(self.obj.anriss or u'')

  get anriss() {
    return this.article.anriss;
  }

//  def text(self):
//      return self.apply_stoerer(self.obj.text, self.obj.stoerer)

  get text() {
    return this.article.text;
  }


}
