import React from 'react';
import bem from 'react-bem-helper';

const classes = new bem({
  name: 'article-header',
  prefix: ''
});

export default React.createClass({

  propTypes: {
    context_label: React.PropTypes.string.isRequired,
    title: React.PropTypes.string.isRequired,
    author: React.PropTypes.string.isRequired,
    source: React.PropTypes.object.isRequired,
    dc: React.PropTypes.object.isRequired
  },

  formatDate(date) {
    var d = date ? new Date(date) : new Date();

    return d.getDate()
      + '.' + d.getMonth()
      + '.' + d.getFullYear()
      + ' ' + d.getHours()
      + ':' + d.getMinutes() + ' Uhr';
  },

  render() {

    return (
      <header {...classes()}>
        <p itemProp='genre' {...classes('catchword', null, 'type-catchword')}>{this.props.context_label}</p>
        <h1 itemProp="headline" {...classes('title', null, 'type-h1')}>{this.props.title}</h1>
        <div {...classes('meta', null, 'type-detail')}>
          <p itemProp='author' {...classes('author', null)}>von {this.props.author} â€“ {this.props.source.title}</p>
          {this.props.dc.modified && this.props.dc.modified !== this.props.dc.effective
            ? <p itemProp='dateModified' {...classes('date')}>Zuletzt aktualisiert am {this.formatDate(this.props.dc.modified)}</p>
            : <p itemProp='dateCreated' {...classes('date')}>{this.formatDate(this.props.dc.effective)}</p>
          }
        </div>
      </header>
    );
  }

});
