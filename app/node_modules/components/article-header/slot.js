var getSource = require('helpers/asset/get-source');
var getBanner = require('helpers/article/get-banner');

var parsedArticle = function(article) {
  // For ugc (and not sponsors) we need to hide the source
  var shouldShowSource = article.content_type !== 'ugcnewsarticle';

  return {
    catchword: article.context_label,
    title: article.title,
    byline: {
      author: shouldShowSource ? article.author : null,
      source: shouldShowSource ? getSource(article.source) : null,
      published: article.dc.effective,
      modified: article.dc.modified,
    },
    banner: getBanner(article)
  };
};

var parsedData = function(state) {
  return parsedArticle(state.article);
};

module.exports = {
  iso: false,
  data: parsedData
};

