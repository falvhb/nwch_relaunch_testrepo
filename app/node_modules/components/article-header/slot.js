var _ = require('lodash');
var getByline = require('helpers/article/get-main-byline');
var getBanner = require('helpers/article/get-banner');
var getAvatar = require('helpers/user/get-avatar');

var modifiersForLabelType = {
  meinung: ['meinung']
};

var avatarsForLabelType = [
  'meinung'
];

var parsedArticle = function(article) {

  var labelType = article.labeltype;
  var user = _.get(article, 'author_detail.user');

  return {
    catchword: article.context_label,
    title: article.title,
    modifiers: modifiersForLabelType[labelType],
    byline: getByline(article),
    avatar: _.includes(avatarsForLabelType, labelType)
      ? getAvatar(user)
      : null,
    banner: getBanner(article)
  };
};

var parsedData = function(state) {
  return parsedArticle(state.article);
};

module.exports = {
  iso: false,
  data: parsedData
};

