import React from 'react';
import bem from 'react-bem-helper';

import Wrapper from './wrapper';

import ResponsiveImage from 'components/responsive-image';
import DateFormatter from 'components/date-formatter';

const classes = new bem({
  name: 'teaser',
  prefix: ''
});

const Teaser = React.createClass({

  displayName: 'Teaser',

  render() {

    let { modifier, theme, title, catchword, link, image, dateFormat, supplementary, schema } = this.props;

    return (
      <article {...classes(null, [modifier, theme])} itemScope itemType='http://schema.org/Article'>
        <a {...classes('inner')} href={link} itemProp='url'>
          {image
            ? <div {...classes('image')} itemProp='image' itemScope itemType='http://schema.org/ImageObject'>
                <ResponsiveImage {...image} defer={true} fill={true} fitToBox={true}/>
              </div>
          :null}

          <footer {...classes('footer')}>
            {catchword && modifier !== 'title'
              ? <p {...classes('catchword')}>{catchword}</p>
            :null}
            <h1 {...classes('title')} itemProp='headline'><span>{title}</span></h1>

            {Object.keys(schema).map(function(schemaItem, index) {
              return <meta itemProp={schemaItem} content={schema[schemaItem]} key={index} />;
            })}

            {supplementary
              ? dateFormat
                ? <p {...classes('supplementary')}><DateFormatter publicationDate={supplementary} format={dateFormat} /></p>
                : <p {...classes('supplementary')}>{supplementary}</p>
            :null}
          </footer>
        </a>
      </article>

    );
  }

});

export default Wrapper(Teaser);
