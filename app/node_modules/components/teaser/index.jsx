import React from 'react';
import bem from 'react-bem-helper';

import ResponsiveImage from 'components/responsive-image';
import DateFormatter from 'components/date-formatter';

const classes = new bem({
  name: 'teaser',
  prefix: ''
});

export default React.createClass({

  displayName: 'Teaser',

  propTypes: {
    modifier: React.PropTypes.string,
    theme: React.PropTypes.string,
    title: React.PropTypes.string.isRequired,
    catchword: React.PropTypes.string,
    link: React.PropTypes.string,
    image: React.PropTypes.object,
    dateFormat: React.PropTypes.oneOfType([
      React.PropTypes.string,
      React.PropTypes.bool
    ]),
    supplementary: React.PropTypes.oneOfType([
      React.PropTypes.string,
      React.PropTypes.bool
    ])
  },

  getDefaultProps() {
    return {
      modifier: 'basic',
      theme: 'default'
    };
  },

  render() {

    var { modifier, theme, title, catchword, link, image, dateFormat, supplementary } = this.props;

    return (
      <article {...classes(null, [modifier, theme])} itemScope itemType='http://schema.org/Article'>
        <a {...classes('inner')} href={link} itemProp='url'>
          {image
            ? <div {...classes('image')} itemProp='image' itemScope itemType='http://schema.org/ImageObject'>
                <ResponsiveImage {...image} defer={true} fill={true} />
              </div>
          :null}
          <footer {...classes('footer')}>
            {catchword && modifier !== 'title'
              ? <p {...classes('catchword')}>{catchword}</p>
            :null}
            <h1 {...classes('title')} itemProp='headline'>{title}</h1>
            {supplementary
              ? dateFormat
                ? <p {...classes('supplementary')}><DateFormatter publicationDate={supplementary} format={dateFormat} /></p>
                : <p {...classes('supplementary')}>{supplementary}</p>
            :null}
          </footer>
        </a>
      </article>

    );
  }

});
