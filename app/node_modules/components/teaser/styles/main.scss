@import 'globals';

/**
 * A teaser is a preview of an article, usually in the form of a small box
 * containing some information about the related article, such as the title, the
 * category and the date. These data depend on the usage of the teaser and are
 * not always the same.
 *
 * There are 6 different variations of this component:
 * - `basic`: the basic one containing a picture, primary, secondary and
 * tertiary content.
 * - `light`: a variation with an image, but with a top border instead.
 * - `light-boxed`: like `light` variation except it sits on a light-grey
 * background, giving an idea of *boxed* content.
 * - `inlined-left`: a variation with the image floated on the left, perfect
 * for list representations.
 * - `inlined-right`: a variation with the image floated on the right, perfect
 * for list representations.
 * - `listed`: a variation meant to be displayed in list of teasers.
 * - `large`: a large variation where the content sits on top of the image,
 * layered with a transparent black background for readibility.
 * - `promoted`: a large variation that can be themed, perfect for home pages
 and heavily promoted teasers.
 *
 * All styles shared to all variations are applied to the `.teaser` class and
 * its elements. Anything specific to a teaser variation is applied using the
 * modifier class of the relevant variation (e.g. `.teaser--large`).
 */

/**
 * Block-level link
 */
.teaser__inner {
  text-decoration: none;
  color: inherit;
  display: block;
}

// scss-lint:disable all

.teaser__inner {
  @include on-interaction {
    .teaser__title span {
      box-shadow: inset 0 -1px 0 $black;
    }
  }
}

.teaser--inverted .teaser__inner {
  @include on-interaction {
    .teaser__title span {
      box-shadow: inset 0 -1px 0 white;
    }
  }
}

.teaser--large .teaser__inner {
  @include on-interaction {
    .teaser__title span {
      @include media('>500px') {
        box-shadow: inset 0 -1px 0 white;
      }
    }
  }
}

// scss-lint:enable all

/**
 * Teaser image (if any)
 * 1. We will fade slightly
 * 2. Image hover transition
 * 3. Brighten the image (as we have a light background)
 * 4. Image hover effect. translateZ stops Safari text-flicker bug
 */
.teaser__image.is-failed {
  opacity: 0;
}

.teaser__image {
  position: relative;
}

.no-touch .teaser__image {
  opacity: 1; /* 1 */
  transition: all 0.25s ease; /* 1 */
}

.no-touch .teaser--large .responsive-image,
.no-touch .teaser--basic .responsive-image {
  transform: scale(1) translateZ(0); /* 4 */
  transition: transform 0.25s cubic-bezier(0.39, 0.575, 0.565, 1); /* 2 */
}

// scss-lint:disable SelectorDepth

.no-touch .teaser--large .teaser__inner,
.no-touch .teaser--basic .teaser__inner {
  @include on-interaction {
    .teaser__image {
      opacity: 0.9; /* 3 */

    }

    .responsive-image {
      transform: scale(1.015) translateZ(0); /* 4 */
    }
  }
}

// scss-lint:enable SelectorDepth

/**
 * Teaser footer
 * 1. Change line-height on parent because some variations have inlined elements
 */
.teaser__footer {
  line-height: 1.1; /* 1 */
}

/**
 * Teaser primary content (usually the article title)
 */
.teaser__title {
  font: 16px / 1.315 $text-font-stack;
  font-weight: 700;
  margin-bottom: ($container-spacing / 2);
}

/**
 * Teaser secondary content (usually the date but not necessarily)
 */
.teaser__catchword {
  @include type-catchword;
  font-size: 0.75em;
  margin-bottom: 6px;
}

/**
 * Teaser tertiary content (usually the spitzmarke)
 */
.teaser__supplementary {
  @include type-detail;
  font-size: 0.75em;
}

/**
 * Anchor the byline to the bottom of the teaser (with padding)
 * Easily aligns everything when teasers take equal heights.
 */
.teaser--light-boxed {
  position: relative;
}

.teaser--light-boxed .teaser__footer {
  padding-bottom: 20px;
}

.teaser--light-boxed .teaser__supplementary {
  position: absolute;
  bottom: 10px;
}


// -----------------------------------------------------------------------------
// Basic variation
// -----------------------------------------------------------------------------

/**
 * Apply margin to bottom teaser images
 */
.teaser--basic .teaser__image,
.teaser--basic-listed .teaser__image {
  margin-bottom: 15px;
}

.teaser--default {
  overflow: hidden; /* So Text doesnâ€™t overflow on Mobile */
}

// -----------------------------------------------------------------------------
// Inverted variation
// -----------------------------------------------------------------------------

.teaser--inverted {
  color: white;
}

.teaser--inverted .teaser__catchword {
  color: shade(#fff, 20%);
}


// -----------------------------------------------------------------------------
// Light (no image) variation
// -----------------------------------------------------------------------------

/**
 * Add a top border on the inner element
 */
.teaser--light .teaser__inner {
  border-top: 4px solid $light-blue;
  padding-top: $container-spacing;
}


// -----------------------------------------------------------------------------
// Light boxed (no image) variation
// -----------------------------------------------------------------------------

/**
 * Add a background and padding for the light-boxed version
 */
.teaser--light-boxed {
  @include island;
}


// -----------------------------------------------------------------------------
// Inlined variation
// -----------------------------------------------------------------------------

/**
 * Teaser inlined
 * 1. Clear inner floats
 */
.teaser--inlined-left,
.teaser--inlined-left .teaser__footer,
.teaser--inlined-right,
.teaser--inlined-right .teaser__footer {
  overflow: hidden; /* 1 */
}

/**
 * Image for the right inlined version
 */
.teaser--inlined-left .teaser__image {
  width: 25%;
  float: left;
}

/**
 * Give some spacing between the content and image when floated
 */
.teaser--inlined-left .teaser__footer {
  padding-left: 20px;
}

/**
 * Image for the left inlined version
 */
.teaser--inlined-right .teaser__image {
  width: 25%;
  float: right;
}

/**
 * Give some spacing between the content and image when floated
 */
.teaser--inlined-right .teaser__footer {
  padding-right: 20px;
}

/**
 * Make the primary and tertiary content on the same line
 */
.teaser--inlined-left .teaser__title,
.teaser--inlined-right .teaser__title {
  display: inline;
}

/**
 * Give some spacing between the primary and tertiary inlined content
 * 1. Make the primary and tertiary content on the same line
 */
.teaser--inlined-left .teaser__supplementary,
.teaser--inlined-right .teaser__supplementary {
  display: inline; /* 1 */
  margin-left: 10px;
}


// -----------------------------------------------------------------------------
// Listed variation
// -----------------------------------------------------------------------------

/**
 * Add a background and padding for the listed version
 */
.teaser--listed {
  background: $very-light-grey;
  padding: $container-spacing;
}


// -----------------------------------------------------------------------------
// Large variation
// -----------------------------------------------------------------------------

/**
 * Position context for footer
 */
.teaser--large .teaser__inner {
  @include media('>500px') {
    position: relative;
  }
}

/**
 * Remove the bottom margin of the image for the large variation
 */
.teaser--large .teaser__image {
  @include media('>500px') {
    margin: 0;
    opacity: 0.9;

    &.is-failed {
      display: block;
      padding-bottom: 75%;
    }
  }
}

/**
 * Add a top transparent black layer to be able to read text on top of image
 * 1. Stretching
 * 2. On top of image
 */
.teaser--large .teaser__image::before {
  @include media('>500px') {
    content: '';
    position: absolute; /* 1 */
    top: 0; /* 1 */
    right: 0; /* 1 */
    bottom: 0; /* 1 */
    left: 0; /* 1 */
    z-index: 3; /* 2 */
  }

  @include media('>500px', '<=750px') {
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 25%, #000 100%);
  }

  @include media('>750px') {
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 45%, #000 100%);
  }
}

/**
 * Fallback for image failure
 */
.teaser--large .teaser__image.is-failed {
  @include media('>500px') {
    display: block;
    padding-bottom: 70%;

    &::before {
      background-color: rgba(black, 0.8);
    }
  }
}

/**
 * Teaser footer
 * 1. Overlapping image, from the bottom
 * 2. On top of image + transparent layer
 */
.teaser--large .teaser__footer {
  @include media('<=500px') {
    background-color: $light-grey;
  }

  @include media('>500px') {
    position: absolute; /* 1 */
    bottom: 0; /* 1 */
    left: 0; /* 1 */
    z-index: 4; /* 2 */
    color: white;
  }

  @include media('<=950px') {
    padding: 16px;
  }

  @include media('>950px') {
    padding: 16px 20px;
  }
}

/**
 * Revisit the font styles for the primary content
 */
.teaser--large .teaser__title {
  margin-bottom: 5px;
  line-height: 1.2;
  max-width: 85%;

  @include media('<=500px') {
    font-size: 18px;
  }

  @include media('>500px', '<=750px') {
    font-size: 21px;
  }

  @include media('>750px', '<=950px') {
    font-size: 19px;
  }

  @include media('>950px', '<=desktop-laptop') {
    font-size: 24px;
  }

  @include media('>desktop-laptop') {
    font-size: 28px;
  }
}

/**
 * Revisit the font styles for the secondary content
 */
.teaser--large .teaser__catchword {
  font-size: 13px;
  margin-bottom: 8px;

  @include media('<=500px') {
    color: $medium-grey;
  }
}

/**
 * Hack the image ratio, providing more balanced layout at medium screens
 */
.teaser--large .responsive-image::before {
  @include media('>750px', '<=950px') {
    padding-bottom: 75%;
  }
}

// -----------------------------------------------------------------------------
// Mega variation
// -----------------------------------------------------------------------------

.teaser--mega {
  position: relative;
  text-align: center;
  color: white;
  max-width: 1010px;
  overflow: visible;
  background-color: black;
  padding-bottom: 10%;
}

.teaser--mega .teaser__title {
  display: inline-block;
  margin-bottom: 0;

  @include media('<=500px') {
    padding-left: 15px;
    padding-right: 15px;
    font-size: 18px;
  }

  @include media('>500px') {
    width: 80%;
    max-width: 17em;
  }

  @include media('>500px', '<=950px') {
    font-size: 22px;
  }

  @include media('>950px') {
    font-size: 28px;
  }
}

.teaser--mega .teaser__footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 6%;
  z-index: 4;
}

.teaser--mega .responsive-image::before {
  @include media('<=500px') {
    padding-bottom: 55%;
  }
}

.teaser--mega .teaser__image::before {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 3;
  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 45%, #000 100%);
}
