import React from 'react';
import bem from 'react-bem-helper';

const classes = new bem({
  name: 'caption',
  prefix: ''
});

export default React.createClass({

  displayName: 'Caption',

  propTypes: {
    title: React.PropTypes.string,
    description: React.PropTypes.string,
    source: React.PropTypes.string,
    element: React.PropTypes.string
  },

  getDefaultProps() {
    return {
      element: 'figcaption'
    };
  },

  render() {

    const { title, source, description, element } = this.props;

    const captionContents = (
      <div>
        {title && title !== description && title !== source
          ? <p {...classes('title', [(title && description) ? 'bold' : null])} itemProp='name'>{title}</p>
        :null}
        {description
          ? <p {...classes('description')} itemProp='description' dangerouslySetInnerHTML={{__html: description }} />
        :null}
        {source
          ? <p {...classes('source')} itemProp='author'>{source}</p>
        :null}
      </div>
    );

    return React.createElement(element, { className: classes().className }, captionContents);

  }

});
