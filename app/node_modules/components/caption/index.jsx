import React from 'react';
import bem from 'react-bem-helper';

const classes = new bem({
  name: 'caption',
  prefix: ''
});

export default React.createClass({

  propTypes: {
    title: React.PropTypes.string,
    description: React.PropTypes.string,
    source: React.PropTypes.string,
    element: React.PropTypes.string
  },

  getDefaultProps() {
    return {
      element: 'figure'
    };
  },

  render() {

    var title, description, source, captionContents;

    if (this.props.title) {
      title = <p {...classes('title')} itemProp='name'>{this.props.title}</p>;
    }

    if (this.props.source) {
      source = <span {...classes('source')} itemProp='author'>{this.props.source}</span>;
    }

    if (this.props.description) {
      description = <span {...classes('description')} itemProp='description'>{this.props.description}</span>;
    }

    captionContents = (
      <div>
        {title}
        <p>
          {description}
          {source}
        </p>
      </div>
    );

    return React.createElement(this.props.element, { className: classes().className }, captionContents);
  }

});
