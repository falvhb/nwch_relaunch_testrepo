import React from 'react';
import bem from 'react-bem-helper';

import ResponsiveImage from 'components/responsive-image';

const classes = new bem({
  name: 'enrichment-image',
  prefix: ''
});

export default React.createClass({

  render() {
    var props = this.props;
    var asset = props.asset;
    // LATER: move this shit to the data wrapping layer
    var description = props.description || asset.description;
    var title = props.title || asset.title;
    var source = props.source.title || props.source.source.title;
    var position = this.props.placement && ['left', 'right'].indexOf(this.props.placement) > -1
      ? 'floating'
      : 'full';

    var imageSize = position === 'full' ? 'max' : 'small';

    return (
      <figure itemScope itemType='http://schema.org/ImageObject' {...classes(null, position)}>
        <ResponsiveImage
          {...classes('responsive-image')}
          ratio='16x9'
          size={imageSize}
          alt={description}
          title={title}
          src={asset.image_url} />
        <figcaption {...classes('footer')}>
          <p {...classes('title')} itemProp='name'>{title}</p>
          <p {...classes('caption')} itemProp='description'>
            {description}
            <span {...classes('source')} itemProp='author'>{source}</span>
          </p>
        </figcaption>
      </figure>
    );
  }

});
