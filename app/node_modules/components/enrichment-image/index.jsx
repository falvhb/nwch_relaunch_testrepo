import React from 'react';
import bem from 'react-bem-helper';

import ResponsiveImage from 'components/responsive-image';
import Caption from 'components/caption';

const classes = new bem({
  name: 'enrichment-image',
  prefix: ''
});

export default React.createClass({

  render() {
    var props = this.props;
    var asset = props.asset;
    // LATER: move this shit to the data wrapping layer
    var description = props.description || asset.description;
    var title = props.title || asset.title;
    var source = asset.source.title || (asset.source.source ? asset.source.source.title : false);
    var position = this.props.placement && ['left', 'right'].indexOf(this.props.placement) > -1
      ? 'floating'
      : 'full';

    var imageSize = position === 'full' ? 'max' : 'small';

    return (
      <figure itemScope itemType='http://schema.org/ImageObject' {...classes(null, position)}>
        <ResponsiveImage
          ratio='16x9'
          size={imageSize}
          alt={description}
          title={title}
          src={asset.image_url} />
        <Caption
          title={title}
          description={description}
          source={source} />
      </figure>
    );
  }

});
