@import 'globals';
@import 'utilities/variables';

/**
 * Störer
 * 1. Extra top padding is meant to give extra room to the border
 *    Should match `height` of `&::before`
 * 2. Negative horizontal margin to capture the edge of the screen
 * 3. Position context for pseudo-element border
 */
.text-stoerer {
  background-color: $light-grey;
  padding: ($text-stoerer-basic-gap + 4px) $text-stoerer-basic-gap $text-stoerer-basic-gap; /* 1 */
  margin: ($text-stoerer-basic-gap * 2) -$text-stoerer-basic-gap; /* 2 */
  position: relative; /* 3 */

  /**
   * Störer on large screens 
   * 1. Extra margin, negative horizontal to “pop out”
   * 2. Extra padding for full-width störers
   */
  @include media('>small') {
    margin: $text-stoerer-large-gap (-$text-stoerer-large-gap); /* 1 */
    padding: $text-stoerer-large-gap; /* 2 */
  }

  /**
   * Not-full width border, hacked with a pseudo-element
   */
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: $text-stoerer-basic-gap;
    right: $text-stoerer-basic-gap;
    height: 4px;
    background-color: $yellow;
    
    /**
     * Adapt to new padding on large screens
     */
    @include media('>small') {
      left: $text-stoerer-large-gap;
      right: $text-stoerer-large-gap;
    }
  }

  /**
   * Prevent a weird gap at the bottom
   */
  p:last-of-type {
    margin-bottom: 0;
  }
}

/**
 * Störer title
 */
.text-stoerer__title {
  @include type-h4;
  margin-bottom: 10px;
  font-weight: bold;
  font-family: $supporting-font-stack;
}

/**
 * Störer content
 * 1. Slightly smaller than core text
 */
.text-stoerer__body p,
.text-stoerer__body li {
  font-family: $supporting-font-stack;
  font-size: 16px; /* 1 */
}

/**
 * Make sure all right and left störers are left floated on large screens as
 * we try to get rid of right floated störers
 * 1. Top margin is basically a magic number to align to text here
 */
.text-stoerer--floating {
  @include media('>small') {
    float: left;
    padding: $text-stoerer-floated-gap;
    margin: 6px ($text-stoerer-floated-gap * 1.5) ($text-stoerer-floated-gap * 1.5) 0; /* 1 */
    width: $text-stoerer-width;

    /**
     * Adapt to updated padding
     */
    &::before {
      left: $text-stoerer-floated-gap;
      right: $text-stoerer-floated-gap;
    }
  }
  
  /**
   * When there is room for negative offset, do it
   */
  @include media('>#{$text-stoerer-breakpoint}') {
    margin-left: -$text-stoerer-offset;
  }
}
