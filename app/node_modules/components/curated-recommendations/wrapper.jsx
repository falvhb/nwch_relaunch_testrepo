import React from 'react';
import _ from 'lodash';

import { getTeaserFromArticle } from 'helpers';

export default Component => React.createClass({

  displayName: 'CuratedRecommendationsWrapper',

  propTypes: {
    teasers: React.PropTypes.arrayOf(React.PropTypes.object).isRequired
  },

  mappedTeasers(teasers) {
    return teasers.map((teaser) => {
      var teaserData = getTeaserFromArticle({
        article: teaser,
        variation: 'light-boxed'
      });
      return teaserData;
    });
  },

  mappedData(props) {
    return _.assign({}, props, { teasers: this.mappedTeasers(props.teasers.slice(0, 3)) });
  },

  render() {
    var data = this.mappedData(this.props);

    return (
      <Component {...data} />
    );
  }

});
