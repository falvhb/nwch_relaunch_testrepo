var _ = require('lodash');
var capitalizeAll = require('helpers/capitalize');

var mapNavigation = function(items) {
  if (!items) {
    return [];
  }

  return items.map(function(item) {
    return {
      title: item.title,
      slug: item.urlpart
    };
  });
};

var parsedData = function(state) {

  var ressort = state.ressort;
  var subressort = state.subressort;

  return {
    title: capitalizeAll(_.get(subressort || ressort, 'title')),
    ressort: ressort,
    subressortSlug: _.get(subressort, 'urlpart'),
    navigation: mapNavigation(state.navigation)
  };

};

module.exports = {
  iso: false,
  data: parsedData
};
