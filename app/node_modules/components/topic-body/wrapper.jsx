import React from 'react';
import _ from 'lodash';

import getTeaserFromArticle from 'helpers/get-teaser-from-article';

export default Component => React.createClass({

  displayName: 'TopicBodyWrapper',

  propTypes: {
    topic: React.PropTypes.string.isRequired,
    articles: React.PropTypes.arrayOf(React.PropTypes.object).isRequired,
    page: React.PropTypes.number.isRequired,
    total: React.PropTypes.number.isRequired
  },

  mappedTeasers(articles) {
    return articles.map((article) => {
      return getTeaserFromArticle({
        article: article,
        variation: 'basic'
      });
    });
  },

  mappedData(props) {
    return _.assign({}, props, { articles: this.mappedTeasers(props.articles) });
  },

  render() {
    return (
      <Component {...this.mappedData(this.props)} />
    );
  }

});
