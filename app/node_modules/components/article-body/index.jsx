import React from 'react';
// import _ from 'lodash';
import bem from 'react-bem-helper';

import Wrapper from './wrapper';
import RawContent from 'components/raw-content';

const classes = new bem({
  name: 'article-body',
  prefix: ''
});

const ArticleBody = React.createClass({

  displayName: 'ArticleBody',

  propTypes: {
    content: React.PropTypes.array.isRequired
  },

  getComponent(item, index) {
    const type = item.type;

    if (type === 'content_block') {
      return <RawContent key={index} content={item.data} />;
    }
  },

  mapContentToComponents(content) {
    let components;
    if (content) {
      components = content.map((item, index) => {
        return this.getComponent(item, index);
      });
    }
    return components;
  },

  render() {
    return (
      <div itemProp="articleBody" {...classes()}>
        {this.mapContentToComponents(this.props.content)}
      </div>
    );
  }

});

export default Wrapper(ArticleBody);
