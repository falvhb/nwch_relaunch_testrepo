@import 'globals';

$layout-switch: 'mobile-portrait';

/**
 * Mega Teaser
 */
.mega-teaser {
  @include edges('pull');
}

/**
 * Grid wrapper
 */
.mega-teaser__grid-wrap {
  background-color: black;

  @include media('>#{$layout-switch}') {
    @include container-gutters($size: 'small');
  }
}


/**
 * Grid element
 * Note: Nothing inside the grid or the grid itself should give vertical height
 * That way, if a certain Teasers isn't rendered there is no visual impact
 * 1. Positions the dividing lines on larger screens
 */
.mega-teaser__grid {
  @include clearfix;

  @include media('>#{$layout-switch}') {
    position: relative; /* 1 */
  }
}

/**
 * Grid item
 * 1. Float into 3 cols at changed layout
 */
.mega-teaser__grid-item {
  @include media('>#{$layout-switch}') {
    float: left; /* 1 */
    width: (100% / 3); /* 1 */
  }
}

/**
 * Teaser within grid
 * 1. Positions the dividing lines on smaller screens
 * 2. Allows dividing lines to show
 */
.mega-teaser__grid-item .teaser {
  @include media('<=#{$layout-switch}') {
    position: relative; /* 1 */
    overflow: visible; /* 2 */
  }
}

/**
 * Teaser footers within grid
 * 1. Constraint for line-length
 */
.mega-teaser__grid-item .teaser__footer {
  @include media('<=#{$layout-switch}') {
    max-width: 400px; /* 1 */
  }
}

/**
 * Teaser links within grid
 * Note: Padding set here for click-area and keeping grid-items themselves at zero height
 * 1. Match negative pull offset for perfect text alignment
 * 2. Vertical padding on smaller screens
 * 3. Vertical padding on larger screens
 */
.mega-teaser__grid-item .teaser__link {
  padding-right: $container-spacing; /* 1 */
  padding-left: $container-spacing; /* 1 */

  @include media('<=#{$layout-switch}') {
    padding-top: 15px; /* 2 */
    padding-bottom: 15px; /* 2 */
  }

  @include media('>#{$layout-switch}') {
    padding-top: 25px; /* 3 */
    padding-bottom: 35px; /* 3 */
  }
}

/**
 * The first grid item on smaller screens
 * 1. Larger space above to give space from larger teaser
 */
.mega-teaser__grid-item:first-child .teaser__inner {
  @include media('<=#{$layout-switch}') {
    padding-top: 20px; /* 1 */
  }
}

/**
 * Dividing lines set by Teasers
 * 1. Set absolute position
 * 2. Set color
 * 3. Above everything else
 */
.mega-teaser__grid-item .teaser::before {
  position: absolute; /* 1 */
  content: '';
  background-color: $medium-grey; /* 2 */
  z-index: 1; /* 3 */
}

/**
 * The first dividng line
 * 1. Make it a line
 * 2. Above Teaser
 * 3. Matches Teaser left & right padding for alignment with text
 */
.mega-teaser__grid-item:first-child .teaser::before {
  height: 1px; /* 1 */
  top: -1px; /* 2 */
  right: $container-spacing; /* 3 */
  left: $container-spacing; /* 3 */
}

/**
 * Every dividing line after the first
 * 1. Make it a line
 * 2. Above Teaser
 * 3. Matches Teaser left & right padding for alignment with text
 * 4. Divide the left of the Teaser
 * 5. Offset from the total height of the grid
 */
.mega-teaser__grid-item:nth-child(n+2) .teaser::before {
  @include media('<=#{$layout-switch}') {
    height: 1px; /* 1 */
    top: -5px; /* 2 */
    right: $container-spacing; /* 3 */
    left: $container-spacing; /* 3 */
  }

  @include media('>#{$layout-switch}') {
    width: 1px; /* 1 */
    left: 0; /* 4 */
    top: 15px; /* 5 */
    bottom: 15px; /* 5 */
  }
}

/**
 * Dividing line at position 2
 * 1. 1/3rd of the way across the grid
 */
.mega-teaser__grid-item:nth-child(2n+2) .teaser::before {
  @include media('>#{$layout-switch}') {
    left: (100% / 3); /* 1 */
  }
}

/**
 * Dividing line at position 3
 * 1. 2/3rds of the way across the grid
 */
.mega-teaser__grid-item:nth-child(2n+3) .teaser::before {
  @include media('>#{$layout-switch}') {
    left: (100% / 3) * 2; /* 1 */
  }
}
