import React from 'react';
import bem from 'react-bem-helper';

import getScript from 'helpers/get-script';
import Slider from 'mixins/slider';

const classes = new bem({
  name: 'related-videos',
  prefix: ''
});

export default React.createClass({

  displayName: 'RelatedVideos',

  mixins: [Slider],

  getInitialState() {
    return {
      support: false,
      mobile: false,
      loading: true
    };
  },

  componentDidMount() {
    this.setState({ support: true });
    this.loadVeeseo();
  },

  componentWillUnmount() {
    window.removeEventListener('resize', this.handleResize);
    this.destroyFlickity();
  },

  loadVeeseo() {
    getScript(
      '//rce.veeseo.com/widgets/aargauerzeitung/widget.js',
      this.renderFlickity({
        startIndex: 1,
        element: '.recommendation ul',
        delay: 2000
      })
    );
  },

  render() {
    return (
      <section ref='related' {...classes()}>
        <h2 {...classes('title')}>Verwandte Videos</h2>
        <div className="veeseoRA2VW2"></div>
      </section>
    );
  }
});
