import React from 'react';
import bem from 'react-bem-helper';

import ResponsiveImage from 'components/responsive-image';

const classes = new bem({
  name: 'image-stoerer',
  prefix: ''
});

export default React.createClass({

  render() {
    var asset = this.props.asset;
    var description = asset.description || this.props.description;
    var title = asset.title || this.props.title;
    var position = this.props.placement && ['left', 'right'].indexOf(this.props.placement) > -1
      ? 'floating'
      : 'full';

    var imageSize = position === 'full' ? 'max' : 'small';

    return (
      <figure itemScope itemType='http://schema.org/ImageObject' {...classes(null, position)}>
        <ResponsiveImage
          {...classes('responsive-image')}
          ratio='16x9'
          size={imageSize}
          alt={description}
          title={title}
          src={asset.image_url} />
        <figcaption {...classes('footer')}>
          <p {...classes('title')} itemProp='name'>{title}</p>
          <p {...classes('caption')} itemProp='description'>
            {description}
            <span {...classes('source')} itemProp='author'>{asset.source}</span>
          </p>
        </figcaption>
      </figure>
    );
  }

});
