var _ = require('lodash');

var parsedData = function(state) {
  var data;

  // transform video and domain data from api schema
  // to target schema required by the component.
  data = _.assign({}, state.api.get('videos'));

  // Set required props for the component
  data.accountID = process.env.KALTURA_ACCOUNT_ID;
  data.playerID = _.get(state.api.get('domain'), 'data.properties.kaltura_mediathek_video_player_id');
  data.categoryId = _.get(state.api.get('domain'), 'kaltura_mediathek_category_id');
  data.pageSize = 12;
  data.searchText = _.get(state.api.get('videos'), 'searchText');

  // Assign property for video source
  data.initialVideoSource = state.api.get('initialVideoSource');

  // Assign property for kaltura session
  data.kalturaSession = _.get(state.api.get('kaltura'), 'kalturaSession');

  return data;
};

module.exports = {
  iso: true,
  data: parsedData
};
