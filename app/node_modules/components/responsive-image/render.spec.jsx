import ResponsiveImage from 'components/responsive-image';
import createComponent from 'utils/test/create-component';
import renderedMarkup from 'utils/test/rendered-markup';

import variations from './.variations';

import { expect } from 'chai';

describe('Responsive Image', function() {

  var image;

  beforeEach(function() {
    image = createComponent(ResponsiveImage, variations[0].data);
  });

  describe('renders', function() {
    it('noscript fallback', function() {
      expect(image.type).to.equal('noscript');
    });

    it('picture element', function() {
      expect(renderedMarkup(image)).to.contain('<picture');
    });

    it('image element', function() {
      expect(renderedMarkup(image)).to.contain('<img');
    });

    it('4 source elements', function() {
      expect(renderedMarkup(image).split('<source').length).to.equal(5);
    });
  });
});
