import createComponent from 'utils/test/create-component';
import renderedMarkup from 'utils/test/rendered-markup';

import ResponsiveImage from 'components/responsive-image';
import variations from 'components/responsive-image/.variations';

const data = variations[0].data;

import { expect } from 'chai';

describe('Responsive Image', function() {

  var image, renderedImage;

  beforeEach(function() {
    image = createComponent(ResponsiveImage, data);
    renderedImage = renderedMarkup(image);
  });

  describe('renders', function() {
    it('noscript fallback', function() {
      expect(image.type).to.equal('noscript');
    });

    it('picture element', function() {
      expect(renderedImage).to.contain('<picture');
    });

    it('image element', function() {
      expect(renderedImage).to.contain('<img');
    });

    it('4 source elements', function() {
      expect(renderedImage.split('<source').length).to.equal(5);
    });

    it('ratio class', function() {
      expect(renderedImage).to.contain('responsive-image--' + data.ratio);
    });

    it('size class', function() {
      expect(renderedImage).to.contain('responsive-image--' + data.size);
    });

    it('alt attribute', function() {
      expect(renderedImage).to.contain('alt=');
    });
  });
});
