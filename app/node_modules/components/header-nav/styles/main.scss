@import 'globals';

$desktop-logo-width: 200px;
$desktop-logo-height: 50px;

$mobile-logo-width: 40px;
$mobile-logo-height: 38px;

/**
 * Navigation bar itself
 * 1. Transition for animating in from top
 */
.header-nav {
  width: 100%;
  margin-bottom: $component-spacing;
  position: absolute;
  width: 100%;
  top: 0;
  z-index: 100;
  transition: transform 0.3s ease; /* 1 */
}

/**
 * Slim version
 * 1. Pull offscreen, ready to animate down
 */
.header-nav.is-slim {
  transform: translateY(-100%); /* 1 */
}

/**
 * Fixed version
 * 1. Return to normal position (showing) when `is-fixed` class added
 */
.header-nav.is-fixed {
  position: fixed;
  transform: translateY(0); /* 1 */
}

/**
 * Top section of header with logo
 */
.header-nav__brand {
  position: relative;
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  background-color: white;

  @include media('<=tablet-portrait') {
    border-bottom: 4px solid $blue;
  }
}

/**
 * Bottom border for slim header on desktop
 * 1. Behind nav and toggle, nav slides above
 */
.header-nav__brand::before {
  @include media('>tablet-portrait') {
    content: '';
    display: block;
    position: absolute;
    z-index: -2; /* 1 */
    left: 0;
    right: 0;
    top: 100%;
    height: 5px;
    background-color: $blue;
  }
}

/**
 * Inner section for relative positioning
 */
.header-nav__brand-wrap {
  overflow: hidden;
  position: relative;
}

/**
 * Logo image
 */
.header-nav__img {
  width: $desktop-logo-width;
}

/**
 * Logo wrapper
 * 1. Important for cropping logo to mobile version
 * 2. Desktop-size version
 * 3. Crop to mobile-size version in slim header
 * 4. Crop to mobile-size version on small screens mobiles
 */
.header-nav__logo {
  display: block;
  overflow: hidden; /* 1 */
}

.header-nav__logo--regular,
.header-nav__logo .header-logo {
  width: $desktop-logo-width; /* 2 */
  height: $desktop-logo-height; /* 2 */
}

.header-nav__logo--slim {
  width: $mobile-logo-width; /* 3 */
  height: $mobile-logo-height; /* 3 */
}

.header-nav__logo--regular {
  @include media('<=tablet-portrait') {
    width: $mobile-logo-width; /* 4 */
    height: $mobile-logo-height; /* 4 */
  }
}

/**
 * Centering container
 * 1. Align with main content
 */
.header-nav__container {
  max-width: $container-width; /* 1 */

  @include media('>center-layout') {
    margin-left: auto;
    margin-right: auto;
  }
}

/**
 * Container for the upper section `.header-nav__brand`
 */
.header-nav__container--upper {
  @include media('<=mobile-portrait') {
    padding-left: $container-spacing;
    padding-right: $container-spacing;
  }

  @include media('>mobile-portrait') {
    padding-left: ($container-spacing * 2);
    padding-right: ($container-spacing * 2);
  }
}

/**
 * Container for the toggle section (with menu)
 */
.header-nav__container--toggle {
  @include media('>tablet-portrait') {
    padding-left: ($container-spacing * 2);
    padding-right: ($container-spacing * 2);
  }
}

/**
 * Wrapper for the trigger button
 * 1. Give positioning
 * 2. Create fade effect for logo
 * 3. Cover the logo for fade effect
 * 4. Hidden until we need it
 * 5. Behind logo
 * 6. Fade-in effect
 * 7. Show when header is slim, or on small screens
 */
.header-nav__trigger-wrap {
  position: absolute; /* 1 */
  top: 0;  /* 1 */
  bottom: 0; /* 1 */
  left: 42px;  /* 1 */
  background-color: white; /* 2 */
  width: $desktop-logo-width; /* 3 */

  @include media('>tablet-portrait') {
    opacity: 0; /* 4 */
    z-index: -1; /* 5 */
    transition: opacity 0.3s; /* 6 */
  }
}

.is-slim .header-nav__trigger-wrap,
.is-mobile .header-nav__trigger-wrap {
  opacity: 1; /* 7 */
  z-index: 0;
}

/**
 * Menu trigger button
 * 1. Vertical centered in header
 */
.header-nav__trigger {
  outline: none;
  position: absolute; /* 1 */
  top: 50%; /* 1 */
  transform: translateY(-50%); /* 1 */
  left: 20px;
  -webkit-appearance: none;
  background-color: inherit;
  font-family: $supporting-font-stack;
  font-size: 0.875em;
  padding-left: 33px;
  color: #6e6e6e;

  @include on-interaction {
    color: $blue;
  }
}

/**
 * Menu trigger icon
 * 1. Vertical centered in header
 * 2. Optical centering
 * 3. Show close icon when menu is open
 * 4. Show menu icon when menu is closed
 */
.header-nav__trigger::before {
  content: '';
  display: block;
  width: 28px;
  height: 28px;
  position: absolute; /* 1 */
  top: 50%; /* 1 */
  transform: translateY(-50%); /* 1 */
  left: 0;
  margin-top: -1px; /* 2 */
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}

.header-nav__trigger.is-open::before {
  background-image: asset('client/images/icons/close.svg'); /* 3 */
}

.header-nav__trigger.is-closed::before {
  background-image: asset('client/images/icons/hamburger.svg'); /* 4 */
}

/**
 * Toggle bar used to show/hide menu
 * 1. Shown by default
 * 2. Hide menu when in closed state
 * 3. Behind navigation
 */
.header-nav__toggle {
  background-color: $blue;
  transition: transform 0.3s;
  transform: translateY(0); /* 1 */
  position: relative;
  z-index: -1; /* 3 */
}

.header-nav__toggle.is-closed {
  transform: translateY(-100%); /* 2 */
}
