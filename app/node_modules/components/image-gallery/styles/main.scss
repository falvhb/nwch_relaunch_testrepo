@import 'globals';

$padding-top: (9/16) * 100%;

.image-gallery {
  position: relative;

  @include media('>730px') {
    overflow: hidden;
  }
}

.image-gallery__nav {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  pointer-events: none;

  @include media('<=730px') {
    padding-top: $padding-top * 0.9;

    &::before {
      content: '';
      background-color: #333;
      position: absolute;
      z-index: -1;
      padding-top: $padding-top * 0.9;
      right: 0;
      bottom: 0;
      left: 0;
    }
  }

  @include media('>730px') {
    padding-top: $padding-top;
  }
}

.image-gallery__grid {
  position: relative;
  z-index: 1;
}

.image-gallery__item {
  @include media('<=730px') {
    width: 90%; /* 1 */
    padding-left: 5px;
    padding-right: 5px;
    z-index: 2;
  }

  @include media('>730px') {
    width: 100%;
  }
}

.image-gallery__item .caption {
  margin-top: 40px;

  @include media('<=730px') {
    margin-left: 0;
    margin-right: 0;
  }
}

.image-gallery__image {
  overflow: hidden;
}

.image-gallery .flickity-viewport {
  box-sizing: content-box;
  padding-top: $padding-top;
  position: relative;
}

.image-gallery .flickity-slider {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

/**
 * Slide number
 * 1. Slightly reduce font size to make it more subtle
 */
.image-gallery__nav-bar {
  background: $light-grey;
  color: $medium-grey;
  line-height: 40px;
  position: absolute;
  left: 0;
  top: 100%;
  right: 0;

  @include media('<=730px') {
    padding-left: 34px;
    padding-right: 34px;
  }

  @include media('>730px') {
    padding-left: 15px;
    padding-right: 15px;
  }

}

.image-gallery__fullscreen {
  display: none;
}

/**
 * Previous / Next buttons
 * 1. On top of gallery
 */
.image-gallery__button {
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 2; /* 1 */
  background-color: $medium-grey;
  pointer-events: auto;
  outline: 0;

  @include media('<=730px') {
    display: none;
  }

  @include on-interaction {
    .icon {
      opacity: 1;
    }
  }

  /**
   * Redefine color and size for icons
   */
  .icon {
    fill: white;
    width: 65px;
    height: 65px;
    opacity: 0.7;
  }
}

.is-gallery-loading .image-gallery__button,
.is-gallery-loading .caption,
.is-gallery-loading .image-gallery__slide-number {
  opacity: 0;
}

/**
 * Previous button
 */
.image-gallery__button--prev {
  left: 0;
  background: linear-gradient(to right, rgba(black, 0.5), transparent);
}

/**
 * Next button
 */
.image-gallery__button--next {
  right: 0;
  background: linear-gradient(to left, rgba(black, 0.5), transparent);
}
