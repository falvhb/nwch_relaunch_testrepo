import React from 'react';

import stripMarkup from 'helpers/strip-markup';
import getSource from 'helpers/get-source';

export default Component =>  React.createClass({

  displayName: 'EnrichmentVideoWrapper',

  propTypes: {
    title: React.PropTypes.string.isRequired,
    description: React.PropTypes.string,
    source: React.PropTypes.object.isRequired,
    still_image: React.PropTypes.object.isRequired
  },

  mappedData(props) {
    return {
      caption: {
        title: props.title,
        description: stripMarkup(props.description),
        source: getSource(props.source)
      },
      meta: {
        thumbnailUrl: props.still_image.image_url || props.still_image.asset.image_url
      }
    };
  },

  render() {
    return (
      <Component {...this.mappedData(this.props.asset)} />
    );
  }

});
