import React from 'react';

import { getAssetMeta } from 'helpers';

export default Component =>  React.createClass({

  displayName: 'EnrichmentVideoWrapper',

  propTypes: {
    asset: React.PropTypes.object.isRequired,
    title: React.PropTypes.string.isRequired,
    description: React.PropTypes.string,
    placement: React.PropTypes.string,
    stoerer_type: React.PropTypes.string
  },

  createVideoMeta(props) {
    return {
      thumbnailUrl: props.still_image ? props.still_image.image_url || props.still_image.asset.image_url : null,
      uploadDate: props.dc && props.dc.created ? props.dc.created : null
    };
  },

  mappedData(props) {
    return {
      kaltura_id: props.asset.kaltura_id,
      accountID: process.env.KALTURA_ACCOUNT_ID,
      trackingURL: process.env.KALTURA_TRACKING_URL,
      meta: this.createVideoMeta(props.asset),
      caption: getAssetMeta(props),
      placement: props.placement,
      isMainAsset: !props.stoerer_type && props.asset.content_type === 'asset_video'
    };
  },

  render() {
    return (
      <Component {...this.mappedData(this.props)} />
    );
  }

});
