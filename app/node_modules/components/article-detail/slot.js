var getMainAsset = require('helpers/get-main-asset');

module.exports = function(state) {

  var parsedData = function(article) {
    var source = article.source.title || (article.source.source ? article.source.source.title : null);

    return {
      header: {
        catchword: article.context_label,
        title: article.title,
        author: article.author || source,
        source: article.author && article.author !== source ? source : null,
        published: article.dc.effective,
        modified: article.dc.modified
      },
      mainAsset: getMainAsset(article.assets),
      body: {
        author: article.author || source,
        enrichments: article.stoerer,
        related: article.related,
        intro: article.lead,
        text: article.text,
        tags: article.keywords,
        title: article.title
      }
    };
  };

  return parsedData(state.article);

};
