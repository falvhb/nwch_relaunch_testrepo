/* eslint-disable no-unused-expressions */

import _ from 'lodash';
import slot from 'components/dossier-header/slot';
import state from 'components/dossier-header/.data-slot';

import { expect } from 'chai';

describe('DossierHeader', function() {

  describe('slot', function() {

    let fixture;

    beforeEach(function() {
      fixture = slot.data(state);
    });

    it('sets iso rendering', function() {
      expect(slot.iso).to.be.true;
    });

    it('returns data', function() {
      expect(fixture).to.be.an('object');
    });

    it('data contains a tags array', function() {
      expect(fixture.tags).to.be.an('array');
    });

    it('tags array contains 6 items', function() {
      expect(fixture.tags.length).to.equal(6);
    });

    it('tags array contains unique items', function() {
      expect(_.uniq(fixture.tags).length).to.equal(6);
    });

    it('data contains title, text and background', function() {
      expect(_.has(fixture, 'title')).to.be.true;
      expect(_.has(fixture, 'text')).to.be.true;
      expect(_.has(fixture, 'background')).to.be.true;
    });

    it('data contains an image asset', function() {
      expect(fixture.image).to.be.an('object');
    });

    it('image asset contains required properties', function() {
      let image = fixture.image;
      expect(_.has(image, 'alt')).to.be.true;
      expect(_.has(image, 'title')).to.be.true;
      expect(_.has(image, 'src')).to.be.true;
    });

  });

});
