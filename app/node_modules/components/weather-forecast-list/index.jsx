import React from 'react';
import BEM from 'react-bem-helper';
import path from 'path';

import Icon from 'components/icon';
import Section from 'components/section';
import Container from 'components/container';

const classes = new BEM('weather-forecast-list');

export default React.createClass({

  displayName: 'WeatherForecastList',

  propTypes: {
    forecast: React.PropTypes.object.isRequired
  },

  getWeatherIcon(symbol) {
    var prefix = process.env.STATIC_ASSETS;
    var href = path.join(prefix, 'images/weather/color/' + symbol + '.svg');
    return (
      <img {...classes('img')} src={href} />
    );
  },

  render() {

    let allForecastData = this.props.forecast.days || [];

    let forecastList = allForecastData.map((item, index) => {


      return (
        <tr key={index}>
          <td {...classes('time')}>00:00</td>
          <td>{this.getWeatherIcon(item.Symb)}</td>
          <td {...classes('group')}>
            <span {...classes('desc')}>{item.Txt}</span>
            <span {...classes('temp')}>{item.Temp}Â°</span>
          </td>
          <td {...classes('wind')}><Icon id="arrow-circle" className={'icon ' + item.Dir.toLowerCase()} />{item.Force}km/h</td>
        </tr>
      );
    });

    return (
      <Section modifier='default'>
        <Container>
          <table {...classes('table')}>
            <tbody>
              {forecastList}
            </tbody>
          </table>
        </Container>
      </Section>
    );
  }
});
