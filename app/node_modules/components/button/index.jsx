import React from 'react';
import bem from 'react-bem-helper';

import Icon from 'components/icon';

const classes = new bem({
  name: 'button',
  prefix: ''
});

export default React.createClass({

  displayName: 'Button',

  propTypes: {
    label: React.PropTypes.string,
    icon: React.PropTypes.string,
    modifier: React.PropTypes.string,
    attributes: React.PropTypes.object,
    // `_target` is either a string (for a link)
    // or a function (for a button)
    // leading underscore meant not to be confused with `target` HTML attribute
    _target: React.PropTypes.oneOfType([
      React.PropTypes.string,
      React.PropTypes.func
    ]).isRequired
  },

  render() {
    var props = this.props;

    if (!props.label && !props.icon) {
      return false;
    }

    var content;
    var icon = props.icon ? <Icon id={props.icon} /> : '';
    var modifiers = {
      icon: props.icon && !props.label,
      [props.modifier]: !!props.modifier
    };

    if (typeof props._target === 'string') {
      content =
        <a href={props._target} {...props.attributes} {...classes(null, modifiers)}>
          {icon}
          {props.label}
        </a>;
    } else {
      content =
        <button onClick={props._target} {...props.attributes} {...classes(null, modifiers)}>
          {icon}
          {props.label}
        </button>;
    }

    return content;

  }

});
