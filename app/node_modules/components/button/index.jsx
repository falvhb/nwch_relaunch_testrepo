import React from 'react';
import bem from 'react-bem-helper';

import Icon from 'components/icon';

const classes = new bem({
  name: 'button',
  prefix: ''
});

export default React.createClass({

  displayName: 'Button',

  propTypes: {
    label: React.PropTypes.string,
    icon: React.PropTypes.string,
    modifier: React.PropTypes.string,
    url: React.PropTypes.string,
    attributes: React.PropTypes.object,
    // `_target` is either a string (for a link)
    // or a function (for a button)
    // leading underscore meant not to be confused with `target` HTML attribute
    _event: React.PropTypes.oneOfType([
      React.PropTypes.string,
      React.PropTypes.func
    ])
  },

  getDefaultProps() {
    return {
      modifier: 'primary'
    };
  },

  render() {

    const { label, icon, modifier, url, attributes, _event } = this.props;

    const iconEl = icon ? <Icon id={icon} /> : null;

    const modifiers = {
      icon: icon && !label,
      [modifier]: !!modifier
    };

    if (url) {
      return (
        <a href={url} onClick={_event} {...attributes} {...classes(null, modifiers)}>
          {iconEl}
          <span {...classes('label')}>{label}</span>
        </a>
      );
    }

    if (_event) {
      return (
        <button onClick={_event} {...attributes} {...classes(null, modifiers)}>
          {iconEl}
          <span {...classes('label')}>{label}</span>
        </button>
      );
    }

    return (
      <span {...attributes} {...classes(null, modifiers)}>
        {iconEl}
        <span {...classes('label')}>{label}</span>
      </span>
    );

  }

});
