import React from 'react';
import bem from 'react-bem-helper';

import Icon from 'components/icon';

const classes = new bem({
  name: 'button',
  prefix: ''
});

export default React.createClass({

  displayName: 'Button',

  propTypes: {
    label: React.PropTypes.string,
    icon: React.PropTypes.string,
    modifier: React.PropTypes.string,
    url: React.PropTypes.string,
    attributes: React.PropTypes.object,
    // `_target` is either a string (for a link)
    // or a function (for a button)
    // leading underscore meant not to be confused with `target` HTML attribute
    _event: React.PropTypes.oneOfType([
      React.PropTypes.string,
      React.PropTypes.func
    ])
  },

  render() {

    var { label, icon, modifier, url, attributes, _event } = this.props;

    var iconEl = icon
      ? <Icon id={icon} />
      : null;

    var modifiers = {
      icon: icon && !label,
      [modifier]: !!modifier
    };

    if (url) {
      return (
        <a href={url} onClick={_event} {...attributes} {...classes(null, modifiers)}>
          {iconEl}
          {label}
        </a>
      );
    }

    return (
      <button onClick={_event} {...attributes} {...classes(null, modifiers)}>
        {iconEl}
        {label}
      </button>
    );

  }

});
