'use strict';

const React = require('react');
const path = require('path');
const slugToTitle = require('slug-to-title');

const Menu = require('styleguide/menu');

const SidebarSection = React.createClass({

  propTypes: {
    title: React.PropTypes.string.isRequired,
    components: React.PropTypes.array.isRequired,
    active: React.PropTypes.string
  },

  mapComponentMenuItems(components) {

    var props = this.props;
    var active = props.active;

    return components.map(function(item) {
      return {
        title: slugToTitle(item.slug),
        link: path.join('/styleguide', props.title, item.slug),
        slug: item.slug,
        active: item.slug === active
      };
    });
  },

  render() {

    return (
      <div>
        <h2 className='styleguide-navigation-title'>{slugToTitle(this.props.title)}</h2>
        <Menu items={this.mapComponentMenuItems(this.props.components)} />
      </div>
    );
  }

});

module.exports = SidebarSection;
