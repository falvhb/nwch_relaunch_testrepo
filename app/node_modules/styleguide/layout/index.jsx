'use strict';

var React = require('react');
var _ = require('lodash');

var Main = require('styleguide/main');
var Sidebar = require('styleguide/sidebar');
var Intro = require('styleguide/intro');
var Component = require('styleguide/component');

var Styleguide = React.createClass({

  propTypes: {
    children: React.PropTypes.element
  },

  getInitialState() {
    var props = this.props;
    return {
      component: _.find(props.components, function(chr) {
        return chr.slug === props.route;
      })
    };
  },

  render() {

    return (
      <div className='styleguide'>
        <Sidebar
          components={this.props.components}
          active={this.state.component}
        />
        <Main>
          {this.props.children ? <Component component={this.state.component}>{this.props.children}</Component> : <Intro/>}
        </Main>
      </div>
    );
  }

});

module.exports = Styleguide;
