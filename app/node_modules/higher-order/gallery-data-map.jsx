import React from 'react';

export default Component => React.createClass({

  displayName: 'Gallery',

  propTypes: {
    title: React.PropTypes.string,
    description: React.PropTypes.string,
    asset: React.PropTypes.object.isRequired
  },

  mappedImages(images) {
    return images.map(function(image) {
      return {
        title: image.title || image.asset.title,
        description: image.description || image.asset.description,
        source: image.asset.source.title || (image.asset.source.source ? image.asset.source.source.title : false),
        url: image.image_url
      };
    });
  },

  mappedData() {
    return {
      title: this.props.title || this.props.asset.title,
      description: this.props.description || this.props.asset.description,
      images: this.mappedImages(this.props.asset.images)
    };
  },

  render() {
    return (
      <Component {...this.mappedData()} />
    );
  }

});
