import jQuery from 'jquery';

export default {
  getVideoHeight(aspectRatio = 16/9, width = 0, toolbarHeight = 35.8) {
    return (width + aspectRatio * toolbarHeight) / aspectRatio;
  },

  setupFixedRatioOnResizingVideo() {
    var self = this;
    var win = jQuery(window);

    win.on('resize.player-' + this.props.kaltura_id, function() {
      jQuery("#"+self.props.kaltura_id).each(function() {
        var e = jQuery(this);

        // set height using custom formula
        e.height( self.getVideoHeight(16 / 9, e.width(), 35.8) );
      });
    });

    win.resize();
  },

  removeFixedRatioOnResizingVideo() {
    jQuery(window).off('resize.player-'+this.props.kaltura_id);
  },

  componentWillUnmount() {
    this.removeFixedRatioOnResizingVideo();
  }
};
